# How to Setup Supabase for Papaji GPS

Follow these steps to get your **URL** and **KEY** for the backend.

## 1. Create a Project
1.  Go to [supabase.com](https://supabase.com) and sign up/login.
2.  Click **"New Project"**.
3.  Choose your organization, give it a name (e.g., `Papaji GPS`), and set a database password.
4.  Select a region close to you (e.g., Mumbai, Singapore).
5.  Click **"Create new project"**.

## 2. Get API Keys
Once the project is created (it takes a minute):
1.  Go to **Project Settings** (the gear icon ⚙️ at the bottom left).
2.  Click on **API**.
3.  Look for the **Project URL**. Copy this.
    *   Paste it into your `.env` file as `SUPABASE_URL`.
4.  Look for the **Secret keys** section. Copy the **Secret Key** (starts with `sb_secret_`).
    *   Paste this into your `backend/.env` file as `SUPABASE_KEY`.
    *   *Note: This key gives full access to your database, so keep it safe!*

## 3. Create the Database Table
1.  Click on the **SQL Editor** (the icon with `>_` on the left sidebar).
2.  Click **"New Query"**.
3.  Paste the following SQL code and click **Run**:

```sql
-- Enable PostGIS for location math (optional but recommended)
create extension if not exists postgis;

-- Create the tracking table
create table tracking_history (
  id bigint generated by default as identity primary key,
  device_id text not null,
  latitude float not null,
  longitude float not null,
  speed float,
  battery float,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- Enable Realtime (so the app updates instantly)
alter publication supabase_realtime add table tracking_history;
```

## 4. Connect Your Backend
1.  In your `backend` folder, create a file named `.env`.
2.  Paste your keys like this:

```env
PORT=3000
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

3.  Run `npm start`. You are ready!
